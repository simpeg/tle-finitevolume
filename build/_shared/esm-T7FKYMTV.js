import{a as K,b as Be}from"/tle-finitevolume/build/_shared/chunk-UU2P65SG.js";import{a as gt}from"/tle-finitevolume/build/_shared/chunk-F3NOVTPN.js";import{a as T,b as Pe,c as B,d as pt,e as bt,k as ue}from"/tle-finitevolume/build/_shared/chunk-K4RCRPLV.js";import"/tle-finitevolume/build/_shared/chunk-MRIGPM2R.js";import"/tle-finitevolume/build/_shared/chunk-22THSYFL.js";import{c as pe,d as z,f as we}from"/tle-finitevolume/build/_shared/chunk-MMC7DYY7.js";import{b as xe,g as yt,j as vt}from"/tle-finitevolume/build/_shared/chunk-QCCLA5MS.js";import{b as Y,c as q,d as dt,e as ht,f as mt}from"/tle-finitevolume/build/_shared/chunk-RAQ24GF6.js";function J(){}function g(){g.init.call(this)}function Et(e){return e._maxListeners===void 0?g.defaultMaxListeners:e._maxListeners}function kn(e,t,n){if(t)e.call(n);else for(var r=e.length,o=be(e,r),s=0;s<r;++s)o[s].call(n)}function Rn(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,s=be(e,o),l=0;l<o;++l)s[l].call(n,r)}function Tn(e,t,n,r,o){if(t)e.call(n,r,o);else for(var s=e.length,l=be(e,s),h=0;h<s;++h)l[h].call(n,r,o)}function Mn(e,t,n,r,o,s){if(t)e.call(n,r,o,s);else for(var l=e.length,h=be(e,l),y=0;y<l;++y)h[y].call(n,r,o,s)}function jn(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,s=be(e,o),l=0;l<o;++l)s[l].apply(n,r)}function wt(e,t,n,r){var o,s,l;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),l=s[t]):(s=e._events=new J,e._eventsCount=0),!l)l=s[t]=n,++e._eventsCount;else if(typeof l=="function"?l=s[t]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),!l.warned&&(o=Et(e),o&&o>0&&l.length>o)){l.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=l.length,Pn(h)}return e}function Pn(e){typeof console.warn=="function"?console.warn(e):console.log(e)}function xt(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function _t(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}function Bn(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}function be(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function Kn(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var Ke,Z,_e=Y(()=>{"use strict";J.prototype=Object.create(null);Z=g;g.EventEmitter=g;g.usingDomains=!1;g.prototype.domain=void 0;g.prototype._events=void 0;g.prototype._maxListeners=void 0;g.defaultMaxListeners=10;g.init=function(){this.domain=null,g.usingDomains&&Ke.active&&!(this instanceof Ke.Domain)&&(this.domain=Ke.active),(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new J,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};g.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};g.prototype.getMaxListeners=function(){return Et(this)};g.prototype.emit=function(t){var n,r,o,s,l,h,y,v=!1,x=t==="error";if(h=this._events,h)x=x&&h.error==null;else if(!x)return!1;if(y=this.domain,x){if(n=arguments[1],y)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=y,n.domainThrown=!1,y.emit("error",n);else{if(n instanceof Error)throw n;var k=new Error('Uncaught, unspecified "error" event. ('+n+")");throw k.context=n,k}return!1}if(r=h[t],!r)return!1;var j=typeof r=="function";switch(o=arguments.length,o){case 1:kn(r,j,this);break;case 2:Rn(r,j,this,arguments[1]);break;case 3:Tn(r,j,this,arguments[1],arguments[2]);break;case 4:Mn(r,j,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(o-1),l=1;l<o;l++)s[l-1]=arguments[l];jn(r,j,this,s)}return v&&y.exit(),!0};g.prototype.addListener=function(t,n){return wt(this,t,n,!1)};g.prototype.on=g.prototype.addListener;g.prototype.prependListener=function(t,n){return wt(this,t,n,!0)};g.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,xt(this,t,n)),this};g.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,xt(this,t,n)),this};g.prototype.removeListener=function(t,n){var r,o,s,l,h;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(o=this._events,!o)return this;if(r=o[t],!r)return this;if(r===n||r.listener&&r.listener===n)--this._eventsCount===0?this._events=new J:(delete o[t],o.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,l=r.length;l-- >0;)if(r[l]===n||r[l].listener&&r[l].listener===n){h=r[l].listener,s=l;break}if(s<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount===0)return this._events=new J,this;delete o[t]}else Bn(r,s);o.removeListener&&this.emit("removeListener",t,h||n)}return this};g.prototype.removeAllListeners=function(t){var n,r;if(r=this._events,!r)return this;if(!r.removeListener)return arguments.length===0?(this._events=new J,this._eventsCount=0):r[t]&&(--this._eventsCount===0?this._events=new J:delete r[t]),this;if(arguments.length===0){for(var o=Object.keys(r),s=0,l;s<o.length;++s)l=o[s],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=new J,this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this};g.prototype.listeners=function(t){var n,r,o=this._events;return o?(n=o[t],n?typeof n=="function"?r=[n.listener||n]:r=Kn(n):r=[]):r=[],r};g.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):_t.call(e,t)};g.prototype.listenerCount=_t;g.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}});function re(){this.head=null,this.tail=null,this.length=0}var Nt,At=Y(()=>{Be();Nt=re;re.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};re.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};re.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};re.prototype.clear=function(){this.head=this.tail=null,this.length=0};re.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n};re.prototype.concat=function(e){if(this.length===0)return K.alloc(0);if(this.length===1)return this.head.data;for(var t=K.allocUnsafe(e>>>0),n=this.head,r=0;n;)n.data.copy(t,r),r+=n.data.length,n=n.next;return t}});var Ct={};dt(Ct,{StringDecoder:()=>ie});function Un(e){if(e&&!Gn(e))throw new Error("Unknown encoding: "+e)}function ie(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),Un(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Wn;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Vn;break;default:this.write=qn;return}this.charBuffer=new K(6),this.charReceived=0,this.charLength=0}function qn(e){return e.toString(this.encoding)}function Wn(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Vn(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var Gn,Ge=Y(()=>{Be();Gn=K.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};ie.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=t.charCodeAt(t.length-1);if(o>=55296&&o<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,r)}return t};ie.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t};ie.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;t+=r.slice(0,n).toString(o)}return t}});function Hn(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}function Xn(e,t){return e.listeners(t).length}function Dt(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof D&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new Nt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new ie(e.encoding),this.encoding=e.encoding)}function N(e){if(!(this instanceof N))return new N(e);this._readableState=new Dt(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),Z.call(this)}function Lt(e,t,n,r,o){var s=$n(t,n);if(s)e.emit("error",s);else if(n===null)t.reading=!1,zn(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!o){var l=new Error("stream.push() after EOF");e.emit("error",l)}else if(t.endEmitted&&o){var h=new Error("stream.unshift() after end event");e.emit("error",h)}else{var y;t.decoder&&!o&&!r&&(n=t.decoder.write(n),y=!t.objectMode&&n.length===0),o||(t.reading=!1),y||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&Ne(e))),Jn(e,t)}else o||(t.reading=!1);return Yn(t)}function Yn(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}function Qn(e){return e>=It?e=It:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Ft(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Qn(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function $n(e,t){var n=null;return!Buffer.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function zn(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,Ne(e)}}function Ne(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(w("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?T(St,e):St(e))}function St(e){w("emit readable"),e.emit("readable"),qe(e)}function Jn(e,t){t.readingMore||(t.readingMore=!0,T(Zn,e,t))}function Zn(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(w("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function er(e){return function(){var t=e._readableState;w("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,qe(e))}}function tr(e){w("readable nexttick read 0"),e.read(0)}function nr(e,t){t.resumeScheduled||(t.resumeScheduled=!0,T(rr,e,t))}function rr(e,t){t.reading||(w("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),qe(e),t.flowing&&!t.reading&&e.read(0)}function qe(e){var t=e._readableState;for(w("flow",t.flowing);t.flowing&&e.read()!==null;);}function Ot(e,t){if(t.length===0)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(t.decoder?n=t.buffer.join(""):t.buffer.length===1?n=t.buffer.head.data:n=t.buffer.concat(t.length),t.buffer.clear()):n=ir(e,t.buffer,t.decoder),n}function ir(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?r=t.shift():r=n?ar(e,t):or(e,t),r}function ar(e,t){var n=t.head,r=1,o=n.data;for(e-=o.length;n=n.next;){var s=n.data,l=e>s.length?s.length:e;if(l===s.length?o+=s:o+=s.slice(0,e),e-=l,e===0){l===s.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(l));break}++r}return t.length-=r,o}function or(e,t){var n=Buffer.allocUnsafe(e),r=t.head,o=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var s=r.data,l=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,l),e-=l,e===0){l===s.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(l));break}++o}return t.length-=o,n}function Ue(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,T(sr,t,e))}function sr(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function lr(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function kt(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var w,It,We=Y(()=>{"use strict";_e();ue();At();Ge();ye();Pe();N.ReadableState=Dt;w=bt("stream");B(N,Z);N.prototype.push=function(e,t){var n=this._readableState;return!n.objectMode&&typeof e=="string"&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=Buffer.from(e,t),t="")),Lt(this,n,e,t,!1)};N.prototype.unshift=function(e){var t=this._readableState;return Lt(this,t,e,"",!0)};N.prototype.isPaused=function(){return this._readableState.flowing===!1};N.prototype.setEncoding=function(e){return this._readableState.decoder=new ie(e),this._readableState.encoding=e,this};It=8388608;N.prototype.read=function(e){w("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return w("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ue(this):Ne(this),null;if(e=Ft(e,t),e===0&&t.ended)return t.length===0&&Ue(this),null;var r=t.needReadable;w("need readable",r),(t.length===0||t.length-e<t.highWaterMark)&&(r=!0,w("length less than watermark",r)),t.ended||t.reading?(r=!1,w("reading or ended",r)):r&&(w("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Ft(n,t)));var o;return e>0?o=Ot(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Ue(this)),o!==null&&this.emit("data",o),o};N.prototype._read=function(e){this.emit("error",new Error("not implemented"))};N.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e);break}r.pipesCount+=1,w("pipe count=%d opts=%j",r.pipesCount,t);var o=!t||t.end!==!1,s=o?h:x;r.endEmitted?T(s):n.once("end",s),e.on("unpipe",l);function l($){w("onunpipe"),$===n&&x()}function h(){w("onend"),e.end()}var y=er(n);e.on("drain",y);var v=!1;function x(){w("cleanup"),e.removeListener("close",de),e.removeListener("finish",V),e.removeListener("drain",y),e.removeListener("error",ee),e.removeListener("unpipe",l),n.removeListener("end",h),n.removeListener("end",x),n.removeListener("data",j),v=!0,r.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&y()}var k=!1;n.on("data",j);function j($){w("ondata"),k=!1;var ke=e.write($);ke===!1&&!k&&((r.pipesCount===1&&r.pipes===e||r.pipesCount>1&&kt(r.pipes,e)!==-1)&&!v&&(w("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,k=!0),n.pause())}function ee($){w("onerror",$),te(),e.removeListener("error",ee),Xn(e,"error")===0&&e.emit("error",$)}Hn(e,"error",ee);function de(){e.removeListener("finish",V),te()}e.once("close",de);function V(){w("onfinish"),e.removeListener("close",de),te()}e.once("finish",V);function te(){w("unpipe"),n.unpipe(e)}return e.emit("pipe",n),r.flowing||(w("pipe resume"),n.resume()),e};N.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this);return this}var s=kt(t.pipes,e);return s===-1?this:(t.pipes.splice(s,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};N.prototype.on=function(e,t){var n=Z.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var r=this._readableState;!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Ne(this,r):T(tr,this))}return n};N.prototype.addListener=N.prototype.on;N.prototype.resume=function(){var e=this._readableState;return e.flowing||(w("resume"),e.flowing=!0,nr(this,e)),this};N.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this};N.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(w("wrapped end"),t.decoder&&!t.ended){var l=t.decoder.end();l&&l.length&&r.push(l)}r.push(null)}),e.on("data",function(l){if(w("wrapped data"),t.decoder&&(l=t.decoder.write(l)),!(t.objectMode&&l==null)&&!(!t.objectMode&&(!l||!l.length))){var h=r.push(l);h||(n=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));var s=["error","close","destroy","pause","resume"];return lr(s,function(l){e.on(l,r.emit.bind(r,l))}),r._read=function(l){w("wrapped _read",l),n&&(n=!1,e.resume())},r};N._fromList=Ot});function ur(){}function cr(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function He(e,t){Object.defineProperty(this,"buffer",{get:pt(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof D&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){yr(t,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Bt(this)}function I(e){if(!(this instanceof I)&&!(this instanceof D))return new I(e);this._writableState=new He(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),g.call(this)}function fr(e,t){var n=new Error("write after end");e.emit("error",n),T(t,n)}function dr(e,t,n,r){var o=!0,s=!1;return n===null?s=new TypeError("May not write null values to stream"):!K.isBuffer(n)&&typeof n!="string"&&n!==void 0&&!t.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),T(r,s),o=!1),o}function hr(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=K.from(t,n)),t}function mr(e,t,n,r,o){n=hr(t,n,r),K.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest=new cr(n,r,o),h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Ve(e,t,!1,s,n,r,o);return l}function Ve(e,t,n,r,o,s,l){t.writelen=r,t.writecb=l,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,s,t.onwrite),t.sync=!1}function pr(e,t,n,r,o){--t.pendingcb,n?T(o,r):o(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function br(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function yr(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(br(n),t)pr(e,n,r,t,o);else{var s=jt(n);!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&Mt(e,n),r?T(Rt,e,n,s,o):Rt(e,n,s,o)}}function Rt(e,t,n,r){n||vr(e,t),t.pendingcb--,r(),Pt(e,t)}function vr(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Mt(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var l=0;n;)o[l]=n,n=n.next,l+=1;Ve(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new Bt(t)}else{for(;n;){var h=n.chunk,y=n.encoding,v=n.callback,x=t.objectMode?1:h.length;if(Ve(e,t,!1,x,h,y,v),n=n.next,t.writing)break}n===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function jt(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Tt(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Pt(e,t){var n=jt(t);return n&&(t.pendingcb===0?(Tt(e,t),t.finished=!0,e.emit("finish")):Tt(e,t)),n}function gr(e,t,n){t.ending=!0,Pt(e,t),n&&(t.finished?T(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function Bt(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var o=r.callback;e.pendingcb--,o(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}var Xe=Y(()=>{ue();Be();_e();ye();Pe();I.WritableState=He;B(I,g);He.prototype.getBuffer=function(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n};I.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};I.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return typeof t=="function"&&(n=t,t=null),K.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),typeof n!="function"&&(n=ur),r.ended?fr(this,n):dr(this,r,e,n)&&(r.pendingcb++,o=mr(this,r,e,t,n)),o};I.prototype.cork=function(){var e=this._writableState;e.corked++};I.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Mt(this,e))};I.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};I.prototype._write=function(e,t,n){n(new Error("not implemented"))};I.prototype._writev=null;I.prototype.end=function(e,t,n){var r=this._writableState;typeof e=="function"?(n=e,e=null,t=null):typeof t=="function"&&(n=t,t=null),e!=null&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),!r.ending&&!r.finished&&gr(this,r,n)}});function D(e){if(!(this instanceof D))return new D(e);N.call(this,e),I.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Er)}function Er(){this.allowHalfOpen||this._writableState.ended||T(wr,this)}function wr(e){e.end()}var Kt,Ce,Ae,ye=Y(()=>{ue();Pe();We();Xe();B(D,N);Kt=Object.keys(I.prototype);for(Ae=0;Ae<Kt.length;Ae++)Ce=Kt[Ae],D.prototype[Ce]||(D.prototype[Ce]=I.prototype[Ce])});function xr(e){this.afterTransform=function(t,n){return _r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function _r(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,n!=null&&e.push(n),o(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function P(e){if(!(this instanceof P))return new P(e);D.call(this,e),this._transformState=new xr(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){Gt(t,n)}):Gt(t)})}function Gt(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}var Ye=Y(()=>{ye();ue();B(P,D);P.prototype.push=function(e,t){return this._transformState.needTransform=!1,D.prototype.push.call(this,e,t)};P.prototype._transform=function(e,t,n){throw new Error("Not implemented")};P.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};P.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}});function ae(e){if(!(this instanceof ae))return new ae(e);P.call(this,e)}var Ut=Y(()=>{Ye();ue();B(ae,P);ae.prototype._transform=function(e,t,n){n(null,e)}});var qt={};dt(qt,{Duplex:()=>D,PassThrough:()=>ae,Readable:()=>N,Stream:()=>G,Transform:()=>P,Writable:()=>I,default:()=>Nr});function G(){Z.call(this)}var Nr,Wt=Y(()=>{_e();ue();ye();We();Xe();Ye();Ut();B(G,Z);G.Readable=N;G.Writable=I;G.Duplex=D;G.Transform=P;G.PassThrough=ae;G.Stream=G;Nr=G;G.prototype.pipe=function(e,t){var n=this;function r(x){e.writable&&e.write(x)===!1&&n.pause&&n.pause()}n.on("data",r);function o(){n.readable&&n.resume&&n.resume()}e.on("drain",o),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",l),n.on("close",h));var s=!1;function l(){s||(s=!0,e.end())}function h(){s||(s=!0,typeof e.destroy=="function"&&e.destroy())}function y(x){if(v(),Z.listenerCount(this,"error")===0)throw x}n.on("error",y),e.on("error",y);function v(){n.removeListener("data",r),e.removeListener("drain",o),n.removeListener("end",l),n.removeListener("close",h),n.removeListener("error",y),e.removeListener("error",y),n.removeListener("end",v),n.removeListener("close",v),e.removeListener("close",v)}return n.on("end",v),n.on("close",v),e.on("close",v),e.emit("pipe",n),e}});var Vt=q((Xi,Ie)=>{var oe=(Wt(),mt(qt));if(oe&&oe.default){Ie.exports=oe.default;for(let e in oe)Ie.exports[e]=oe[e]}else oe&&(Ie.exports=oe)});var Ht=q((Yi,Fe)=>{var se=(Ge(),mt(Ct));if(se&&se.default){Fe.exports=se.default;for(let e in se)Fe.exports[e]=se[e]}else se&&(Fe.exports=se)});var Xt=q(Se=>{(function(e){e.parser=function(a,i){return new n(a,i)},e.SAXParser=n,e.SAXStream=v,e.createStream=y,e.MAX_BUFFER_LENGTH=64*1024;var t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(a,i){if(!(this instanceof n))return new n(a,i);var d=this;o(d),d.q=d.c="",d.bufferCheckPosition=e.MAX_BUFFER_LENGTH,d.opt=i||{},d.opt.lowercase=d.opt.lowercase||d.opt.lowercasetags,d.looseCase=d.opt.lowercase?"toLowerCase":"toUpperCase",d.tags=[],d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.strict=!!a,d.noscript=!!(a||d.opt.noscript),d.state=c.BEGIN,d.strictEntities=d.opt.strictEntities,d.ENTITIES=d.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),d.attribList=[],d.opt.xmlns&&(d.ns=Object.create(de)),d.trackPosition=d.opt.position!==!1,d.trackPosition&&(d.position=d.line=d.column=0),he(d,"onready")}Object.create||(Object.create=function(a){function i(){}i.prototype=a;var d=new i;return d}),Object.keys||(Object.keys=function(a){var i=[];for(var d in a)a.hasOwnProperty(d)&&i.push(d);return i});function r(a){for(var i=Math.max(e.MAX_BUFFER_LENGTH,10),d=0,u=0,E=t.length;u<E;u++){var C=a[t[u]].length;if(C>i)switch(t[u]){case"textNode":me(a);break;case"cdata":A(a,"oncdata",a.cdata),a.cdata="";break;case"script":A(a,"onscript",a.script),a.script="";break;default:Ee(a,"Max buffer length exceeded: "+t[u])}d=Math.max(d,C)}var F=e.MAX_BUFFER_LENGTH-d;a.bufferCheckPosition=F+a.position}function o(a){for(var i=0,d=t.length;i<d;i++)a[t[i]]=""}function s(a){me(a),a.cdata!==""&&(A(a,"oncdata",a.cdata),a.cdata=""),a.script!==""&&(A(a,"onscript",a.script),a.script="")}n.prototype={end:function(){st(this)},write:Ln,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var l;try{l=Vt().Stream}catch{l=function(){}}var h=e.EVENTS.filter(function(a){return a!=="error"&&a!=="end"});function y(a,i){return new v(a,i)}function v(a,i){if(!(this instanceof v))return new v(a,i);l.apply(this),this._parser=new n(a,i),this.writable=!0,this.readable=!0;var d=this;this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(u){d.emit("error",u),d._parser.error=null},this._decoder=null,h.forEach(function(u){Object.defineProperty(d,"on"+u,{get:function(){return d._parser["on"+u]},set:function(E){if(!E)return d.removeAllListeners(u),d._parser["on"+u]=E,E;d.on(u,E)},enumerable:!0,configurable:!1})})}v.prototype=Object.create(l.prototype,{constructor:{value:v}}),v.prototype.write=function(a){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(a)){if(!this._decoder){var i=Ht().StringDecoder;this._decoder=new i("utf8")}a=this._decoder.write(a)}return this._parser.write(a.toString()),this.emit("data",a),!0},v.prototype.end=function(a){return a&&a.length&&this.write(a),this._parser.end(),!0},v.prototype.on=function(a,i){var d=this;return!d._parser["on"+a]&&h.indexOf(a)!==-1&&(d._parser["on"+a]=function(){var u=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);u.splice(0,0,a),d.emit.apply(d,u)}),l.prototype.on.call(d,a,i)};var x="[CDATA[",k="DOCTYPE",j="http://www.w3.org/XML/1998/namespace",ee="http://www.w3.org/2000/xmlns/",de={xml:j,xmlns:ee},V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,te=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,$=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ke=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function R(a){return a===" "||a===`
`||a==="\r"||a==="	"}function ge(a){return a==='"'||a==="'"}function In(a){return a===">"||R(a)}function H(a,i){return a.test(i)}function Fn(a,i){return!H(a,i)}var c=0;e.STATE={BEGIN:c++,BEGIN_WHITESPACE:c++,TEXT:c++,TEXT_ENTITY:c++,OPEN_WAKA:c++,SGML_DECL:c++,SGML_DECL_QUOTED:c++,DOCTYPE:c++,DOCTYPE_QUOTED:c++,DOCTYPE_DTD:c++,DOCTYPE_DTD_QUOTED:c++,COMMENT_STARTING:c++,COMMENT:c++,COMMENT_ENDING:c++,COMMENT_ENDED:c++,CDATA:c++,CDATA_ENDING:c++,CDATA_ENDING_2:c++,PROC_INST:c++,PROC_INST_BODY:c++,PROC_INST_ENDING:c++,OPEN_TAG:c++,OPEN_TAG_SLASH:c++,ATTRIB:c++,ATTRIB_NAME:c++,ATTRIB_NAME_SAW_WHITE:c++,ATTRIB_VALUE:c++,ATTRIB_VALUE_QUOTED:c++,ATTRIB_VALUE_CLOSED:c++,ATTRIB_VALUE_UNQUOTED:c++,ATTRIB_VALUE_ENTITY_Q:c++,ATTRIB_VALUE_ENTITY_U:c++,CLOSE_TAG:c++,CLOSE_TAG_SAW_WHITE:c++,SCRIPT:c++,SCRIPT_ENDING:c++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(a){var i=e.ENTITIES[a],d=typeof i=="number"?String.fromCharCode(i):i;e.ENTITIES[a]=d});for(var at in e.STATE)e.STATE[e.STATE[at]]=at;c=e.STATE;function he(a,i,d){a[i]&&a[i](d)}function A(a,i,d){a.textNode&&me(a),he(a,i,d)}function me(a){a.textNode=ot(a.opt,a.textNode),a.textNode&&he(a,"ontext",a.textNode),a.textNode=""}function ot(a,i){return a.trim&&(i=i.trim()),a.normalize&&(i=i.replace(/\s+/g," ")),i}function Ee(a,i){return me(a),a.trackPosition&&(i+=`
Line: `+a.line+`
Column: `+a.column+`
Char: `+a.c),i=new Error(i),a.error=i,he(a,"onerror",i),a}function st(a){return a.sawRoot&&!a.closedRoot&&_(a,"Unclosed root tag"),a.state!==c.BEGIN&&a.state!==c.BEGIN_WHITESPACE&&a.state!==c.TEXT&&Ee(a,"Unexpected end"),me(a),a.c="",a.closed=!0,he(a,"onend"),n.call(a,a.strict,a.opt),a}function _(a,i){if(typeof a!="object"||!(a instanceof n))throw new Error("bad call to strictFail");a.strict&&Ee(a,i)}function Sn(a){a.strict||(a.tagName=a.tagName[a.looseCase]());var i=a.tags[a.tags.length-1]||a,d=a.tag={name:a.tagName,attributes:{}};a.opt.xmlns&&(d.ns=i.ns),a.attribList.length=0,A(a,"onopentagstart",d)}function Re(a,i){var d=a.indexOf(":"),u=d<0?["",a]:a.split(":"),E=u[0],C=u[1];return i&&a==="xmlns"&&(E="xmlns",C=""),{prefix:E,local:C}}function Te(a){if(a.strict||(a.attribName=a.attribName[a.looseCase]()),a.attribList.indexOf(a.attribName)!==-1||a.tag.attributes.hasOwnProperty(a.attribName)){a.attribName=a.attribValue="";return}if(a.opt.xmlns){var i=Re(a.attribName,!0),d=i.prefix,u=i.local;if(d==="xmlns")if(u==="xml"&&a.attribValue!==j)_(a,"xml: prefix must be bound to "+j+`
Actual: `+a.attribValue);else if(u==="xmlns"&&a.attribValue!==ee)_(a,"xmlns: prefix must be bound to "+ee+`
Actual: `+a.attribValue);else{var E=a.tag,C=a.tags[a.tags.length-1]||a;E.ns===C.ns&&(E.ns=Object.create(C.ns)),E.ns[u]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,A(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function ne(a,i){if(a.opt.xmlns){var d=a.tag,u=Re(a.tagName);d.prefix=u.prefix,d.local=u.local,d.uri=d.ns[u.prefix]||"",d.prefix&&!d.uri&&(_(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),d.uri=u.prefix);var E=a.tags[a.tags.length-1]||a;d.ns&&E.ns!==d.ns&&Object.keys(d.ns).forEach(function(ft){A(a,"onopennamespace",{prefix:ft,uri:d.ns[ft]})});for(var C=0,F=a.attribList.length;C<F;C++){var M=a.attribList[C],U=M[0],le=M[1],S=Re(U,!0),X=S.prefix,On=S.local,ct=X===""?"":d.ns[X]||"",je={name:U,value:le,prefix:X,local:On,uri:ct};X&&X!=="xmlns"&&!ct&&(_(a,"Unbound namespace prefix: "+JSON.stringify(X)),je.uri=X),a.tag.attributes[U]=je,A(a,"onattribute",je)}a.attribList.length=0}a.tag.isSelfClosing=!!i,a.sawRoot=!0,a.tags.push(a.tag),A(a,"onopentag",a.tag),i||(!a.noscript&&a.tagName.toLowerCase()==="script"?a.state=c.SCRIPT:a.state=c.TEXT,a.tag=null,a.tagName=""),a.attribName=a.attribValue="",a.attribList.length=0}function Me(a){if(!a.tagName){_(a,"Weird empty close tag."),a.textNode+="</>",a.state=c.TEXT;return}if(a.script){if(a.tagName!=="script"){a.script+="</"+a.tagName+">",a.tagName="",a.state=c.SCRIPT;return}A(a,"onscript",a.script),a.script=""}var i=a.tags.length,d=a.tagName;a.strict||(d=d[a.looseCase]());for(var u=d;i--;){var E=a.tags[i];if(E.name!==u)_(a,"Unexpected close tag");else break}if(i<0){_(a,"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">",a.state=c.TEXT;return}a.tagName=d;for(var C=a.tags.length;C-- >i;){var F=a.tag=a.tags.pop();a.tagName=a.tag.name,A(a,"onclosetag",a.tagName);var M={};for(var U in F.ns)M[U]=F.ns[U];var le=a.tags[a.tags.length-1]||a;a.opt.xmlns&&F.ns!==le.ns&&Object.keys(F.ns).forEach(function(S){var X=F.ns[S];A(a,"onclosenamespace",{prefix:S,uri:X})})}i===0&&(a.closedRoot=!0),a.tagName=a.attribValue=a.attribName="",a.attribList.length=0,a.state=c.TEXT}function Dn(a){var i=a.entity,d=i.toLowerCase(),u,E="";return a.ENTITIES[i]?a.ENTITIES[i]:a.ENTITIES[d]?a.ENTITIES[d]:(i=d,i.charAt(0)==="#"&&(i.charAt(1)==="x"?(i=i.slice(2),u=parseInt(i,16),E=u.toString(16)):(i=i.slice(1),u=parseInt(i,10),E=u.toString(10))),i=i.replace(/^0+/,""),isNaN(u)||E.toLowerCase()!==i?(_(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(u))}function lt(a,i){i==="<"?(a.state=c.OPEN_WAKA,a.startTagPosition=a.position):R(i)||(_(a,"Non-whitespace before first tag."),a.textNode=i,a.state=c.TEXT)}function ut(a,i){var d="";return i<a.length&&(d=a.charAt(i)),d}function Ln(a){var i=this;if(this.error)throw this.error;if(i.closed)return Ee(i,"Cannot write after close. Assign an onready handler.");if(a===null)return st(i);typeof a=="object"&&(a=a.toString());for(var d=0,u="";u=ut(a,d++),i.c=u,!!u;)switch(i.trackPosition&&(i.position++,u===`
`?(i.line++,i.column=0):i.column++),i.state){case c.BEGIN:if(i.state=c.BEGIN_WHITESPACE,u==="\uFEFF")continue;lt(i,u);continue;case c.BEGIN_WHITESPACE:lt(i,u);continue;case c.TEXT:if(i.sawRoot&&!i.closedRoot){for(var E=d-1;u&&u!=="<"&&u!=="&";)u=ut(a,d++),u&&i.trackPosition&&(i.position++,u===`
`?(i.line++,i.column=0):i.column++);i.textNode+=a.substring(E,d-1)}u==="<"&&!(i.sawRoot&&i.closedRoot&&!i.strict)?(i.state=c.OPEN_WAKA,i.startTagPosition=i.position):(!R(u)&&(!i.sawRoot||i.closedRoot)&&_(i,"Text data outside of root node."),u==="&"?i.state=c.TEXT_ENTITY:i.textNode+=u);continue;case c.SCRIPT:u==="<"?i.state=c.SCRIPT_ENDING:i.script+=u;continue;case c.SCRIPT_ENDING:u==="/"?i.state=c.CLOSE_TAG:(i.script+="<"+u,i.state=c.SCRIPT);continue;case c.OPEN_WAKA:if(u==="!")i.state=c.SGML_DECL,i.sgmlDecl="";else if(!R(u))if(H(V,u))i.state=c.OPEN_TAG,i.tagName=u;else if(u==="/")i.state=c.CLOSE_TAG,i.tagName="";else if(u==="?")i.state=c.PROC_INST,i.procInstName=i.procInstBody="";else{if(_(i,"Unencoded <"),i.startTagPosition+1<i.position){var C=i.position-i.startTagPosition;u=new Array(C).join(" ")+u}i.textNode+="<"+u,i.state=c.TEXT}continue;case c.SGML_DECL:(i.sgmlDecl+u).toUpperCase()===x?(A(i,"onopencdata"),i.state=c.CDATA,i.sgmlDecl="",i.cdata=""):i.sgmlDecl+u==="--"?(i.state=c.COMMENT,i.comment="",i.sgmlDecl=""):(i.sgmlDecl+u).toUpperCase()===k?(i.state=c.DOCTYPE,(i.doctype||i.sawRoot)&&_(i,"Inappropriately located doctype declaration"),i.doctype="",i.sgmlDecl=""):u===">"?(A(i,"onsgmldeclaration",i.sgmlDecl),i.sgmlDecl="",i.state=c.TEXT):(ge(u)&&(i.state=c.SGML_DECL_QUOTED),i.sgmlDecl+=u);continue;case c.SGML_DECL_QUOTED:u===i.q&&(i.state=c.SGML_DECL,i.q=""),i.sgmlDecl+=u;continue;case c.DOCTYPE:u===">"?(i.state=c.TEXT,A(i,"ondoctype",i.doctype),i.doctype=!0):(i.doctype+=u,u==="["?i.state=c.DOCTYPE_DTD:ge(u)&&(i.state=c.DOCTYPE_QUOTED,i.q=u));continue;case c.DOCTYPE_QUOTED:i.doctype+=u,u===i.q&&(i.q="",i.state=c.DOCTYPE);continue;case c.DOCTYPE_DTD:i.doctype+=u,u==="]"?i.state=c.DOCTYPE:ge(u)&&(i.state=c.DOCTYPE_DTD_QUOTED,i.q=u);continue;case c.DOCTYPE_DTD_QUOTED:i.doctype+=u,u===i.q&&(i.state=c.DOCTYPE_DTD,i.q="");continue;case c.COMMENT:u==="-"?i.state=c.COMMENT_ENDING:i.comment+=u;continue;case c.COMMENT_ENDING:u==="-"?(i.state=c.COMMENT_ENDED,i.comment=ot(i.opt,i.comment),i.comment&&A(i,"oncomment",i.comment),i.comment=""):(i.comment+="-"+u,i.state=c.COMMENT);continue;case c.COMMENT_ENDED:u!==">"?(_(i,"Malformed comment"),i.comment+="--"+u,i.state=c.COMMENT):i.state=c.TEXT;continue;case c.CDATA:u==="]"?i.state=c.CDATA_ENDING:i.cdata+=u;continue;case c.CDATA_ENDING:u==="]"?i.state=c.CDATA_ENDING_2:(i.cdata+="]"+u,i.state=c.CDATA);continue;case c.CDATA_ENDING_2:u===">"?(i.cdata&&A(i,"oncdata",i.cdata),A(i,"onclosecdata"),i.cdata="",i.state=c.TEXT):u==="]"?i.cdata+="]":(i.cdata+="]]"+u,i.state=c.CDATA);continue;case c.PROC_INST:u==="?"?i.state=c.PROC_INST_ENDING:R(u)?i.state=c.PROC_INST_BODY:i.procInstName+=u;continue;case c.PROC_INST_BODY:if(!i.procInstBody&&R(u))continue;u==="?"?i.state=c.PROC_INST_ENDING:i.procInstBody+=u;continue;case c.PROC_INST_ENDING:u===">"?(A(i,"onprocessinginstruction",{name:i.procInstName,body:i.procInstBody}),i.procInstName=i.procInstBody="",i.state=c.TEXT):(i.procInstBody+="?"+u,i.state=c.PROC_INST_BODY);continue;case c.OPEN_TAG:H(te,u)?i.tagName+=u:(Sn(i),u===">"?ne(i):u==="/"?i.state=c.OPEN_TAG_SLASH:(R(u)||_(i,"Invalid character in tag name"),i.state=c.ATTRIB));continue;case c.OPEN_TAG_SLASH:u===">"?(ne(i,!0),Me(i)):(_(i,"Forward-slash in opening tag not followed by >"),i.state=c.ATTRIB);continue;case c.ATTRIB:if(R(u))continue;u===">"?ne(i):u==="/"?i.state=c.OPEN_TAG_SLASH:H(V,u)?(i.attribName=u,i.attribValue="",i.state=c.ATTRIB_NAME):_(i,"Invalid attribute name");continue;case c.ATTRIB_NAME:u==="="?i.state=c.ATTRIB_VALUE:u===">"?(_(i,"Attribute without value"),i.attribValue=i.attribName,Te(i),ne(i)):R(u)?i.state=c.ATTRIB_NAME_SAW_WHITE:H(te,u)?i.attribName+=u:_(i,"Invalid attribute name");continue;case c.ATTRIB_NAME_SAW_WHITE:if(u==="=")i.state=c.ATTRIB_VALUE;else{if(R(u))continue;_(i,"Attribute without value"),i.tag.attributes[i.attribName]="",i.attribValue="",A(i,"onattribute",{name:i.attribName,value:""}),i.attribName="",u===">"?ne(i):H(V,u)?(i.attribName=u,i.state=c.ATTRIB_NAME):(_(i,"Invalid attribute name"),i.state=c.ATTRIB)}continue;case c.ATTRIB_VALUE:if(R(u))continue;ge(u)?(i.q=u,i.state=c.ATTRIB_VALUE_QUOTED):(_(i,"Unquoted attribute value"),i.state=c.ATTRIB_VALUE_UNQUOTED,i.attribValue=u);continue;case c.ATTRIB_VALUE_QUOTED:if(u!==i.q){u==="&"?i.state=c.ATTRIB_VALUE_ENTITY_Q:i.attribValue+=u;continue}Te(i),i.q="",i.state=c.ATTRIB_VALUE_CLOSED;continue;case c.ATTRIB_VALUE_CLOSED:R(u)?i.state=c.ATTRIB:u===">"?ne(i):u==="/"?i.state=c.OPEN_TAG_SLASH:H(V,u)?(_(i,"No whitespace between attributes"),i.attribName=u,i.attribValue="",i.state=c.ATTRIB_NAME):_(i,"Invalid attribute name");continue;case c.ATTRIB_VALUE_UNQUOTED:if(!In(u)){u==="&"?i.state=c.ATTRIB_VALUE_ENTITY_U:i.attribValue+=u;continue}Te(i),u===">"?ne(i):i.state=c.ATTRIB;continue;case c.CLOSE_TAG:if(i.tagName)u===">"?Me(i):H(te,u)?i.tagName+=u:i.script?(i.script+="</"+i.tagName,i.tagName="",i.state=c.SCRIPT):(R(u)||_(i,"Invalid tagname in closing tag"),i.state=c.CLOSE_TAG_SAW_WHITE);else{if(R(u))continue;Fn(V,u)?i.script?(i.script+="</"+u,i.state=c.SCRIPT):_(i,"Invalid tagname in closing tag."):i.tagName=u}continue;case c.CLOSE_TAG_SAW_WHITE:if(R(u))continue;u===">"?Me(i):_(i,"Invalid characters in closing tag");continue;case c.TEXT_ENTITY:case c.ATTRIB_VALUE_ENTITY_Q:case c.ATTRIB_VALUE_ENTITY_U:var F,M;switch(i.state){case c.TEXT_ENTITY:F=c.TEXT,M="textNode";break;case c.ATTRIB_VALUE_ENTITY_Q:F=c.ATTRIB_VALUE_QUOTED,M="attribValue";break;case c.ATTRIB_VALUE_ENTITY_U:F=c.ATTRIB_VALUE_UNQUOTED,M="attribValue";break}u===";"?(i[M]+=Dn(i),i.entity="",i.state=F):H(i.entity.length?ke:$,u)?i.entity+=u:(_(i,"Invalid character in entity name"),i[M]+="&"+i.entity+u,i.entity="",i.state=F);continue;default:throw new Error(i,"Unknown state: "+i.state)}return i.position>=i.bufferCheckPosition&&r(i),i}String.fromCodePoint||function(){var a=String.fromCharCode,i=Math.floor,d=function(){var u=16384,E=[],C,F,M=-1,U=arguments.length;if(!U)return"";for(var le="";++M<U;){var S=Number(arguments[M]);if(!isFinite(S)||S<0||S>1114111||i(S)!==S)throw RangeError("Invalid code point: "+S);S<=65535?E.push(S):(S-=65536,C=(S>>10)+55296,F=S%1024+56320,E.push(C,F)),(M+1===U||E.length>u)&&(le+=a.apply(null,E),E.length=0)}return le};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})(typeof Se>"u"?Se.sax={}:Se)});var De=q(($i,Yt)=>{Yt.exports={isArray:function(e){return Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object Array]"}}});var Le=q((zi,Qt)=>{var Ar=De().isArray;Qt.exports={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){(!(e in t)||typeof t[e]!="boolean")&&(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!Ar(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,t){(!(e+"Key"in t)||typeof t[e+"Key"]!="string")&&(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}});var $e=q((Ji,rn)=>{var Cr=Xt(),Ir={on:function(){},parse:function(){}},p=Le(),ce=De().isArray,f,Qe=!0,m;function Fr(e){return f=p.copyOptions(e),p.ensureFlagExists("ignoreDeclaration",f),p.ensureFlagExists("ignoreInstruction",f),p.ensureFlagExists("ignoreAttributes",f),p.ensureFlagExists("ignoreText",f),p.ensureFlagExists("ignoreComment",f),p.ensureFlagExists("ignoreCdata",f),p.ensureFlagExists("ignoreDoctype",f),p.ensureFlagExists("compact",f),p.ensureFlagExists("alwaysChildren",f),p.ensureFlagExists("addParent",f),p.ensureFlagExists("trim",f),p.ensureFlagExists("nativeType",f),p.ensureFlagExists("nativeTypeAttributes",f),p.ensureFlagExists("sanitize",f),p.ensureFlagExists("instructionHasAttributes",f),p.ensureFlagExists("captureSpacesBetweenElements",f),p.ensureAlwaysArrayExists(f),p.ensureKeyExists("declaration",f),p.ensureKeyExists("instruction",f),p.ensureKeyExists("attributes",f),p.ensureKeyExists("text",f),p.ensureKeyExists("comment",f),p.ensureKeyExists("cdata",f),p.ensureKeyExists("doctype",f),p.ensureKeyExists("type",f),p.ensureKeyExists("name",f),p.ensureKeyExists("elements",f),p.ensureKeyExists("parent",f),p.checkFnExists("doctype",f),p.checkFnExists("instruction",f),p.checkFnExists("cdata",f),p.checkFnExists("comment",f),p.checkFnExists("text",f),p.checkFnExists("instructionName",f),p.checkFnExists("elementName",f),p.checkFnExists("attributeName",f),p.checkFnExists("attributeValue",f),p.checkFnExists("attributes",f),f}function tn(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return n==="true"?!0:n==="false"?!1:e}function ve(e,t){var n;if(f.compact){if(!m[f[e+"Key"]]&&(ce(f.alwaysArray)?f.alwaysArray.indexOf(f[e+"Key"])!==-1:f.alwaysArray)&&(m[f[e+"Key"]]=[]),m[f[e+"Key"]]&&!ce(m[f[e+"Key"]])&&(m[f[e+"Key"]]=[m[f[e+"Key"]]]),e+"Fn"in f&&typeof t=="string"&&(t=f[e+"Fn"](t,m)),e==="instruction"&&("instructionFn"in f||"instructionNameFn"in f)){for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in f)t[n]=f.instructionFn(t[n],n,m);else{var r=t[n];delete t[n],t[f.instructionNameFn(n,r,m)]=r}}ce(m[f[e+"Key"]])?m[f[e+"Key"]].push(t):m[f[e+"Key"]]=t}else{m[f.elementsKey]||(m[f.elementsKey]=[]);var o={};if(o[f.typeKey]=e,e==="instruction"){for(n in t)if(t.hasOwnProperty(n))break;o[f.nameKey]="instructionNameFn"in f?f.instructionNameFn(n,t,m):n,f.instructionHasAttributes?(o[f.attributesKey]=t[n][f.attributesKey],"instructionFn"in f&&(o[f.attributesKey]=f.instructionFn(o[f.attributesKey],n,m))):("instructionFn"in f&&(t[n]=f.instructionFn(t[n],n,m)),o[f.instructionKey]=t[n])}else e+"Fn"in f&&(t=f[e+"Fn"](t,m)),o[f[e+"Key"]]=t;f.addParent&&(o[f.parentKey]=m),m[f.elementsKey].push(o)}}function nn(e){if("attributesFn"in f&&e&&(e=f.attributesFn(e,m)),(f.trim||"attributeValueFn"in f||"attributeNameFn"in f||f.nativeTypeAttributes)&&e){var t;for(t in e)if(e.hasOwnProperty(t)&&(f.trim&&(e[t]=e[t].trim()),f.nativeTypeAttributes&&(e[t]=tn(e[t])),"attributeValueFn"in f&&(e[t]=f.attributeValueFn(e[t],t,m)),"attributeNameFn"in f)){var n=e[t];delete e[t],e[f.attributeNameFn(t,e[t],m)]=n}}return e}function Sr(e){var t={};if(e.body&&(e.name.toLowerCase()==="xml"||f.instructionHasAttributes)){for(var n=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,r;(r=n.exec(e.body))!==null;)t[r[1]]=r[2]||r[3]||r[4];t=nn(t)}if(e.name.toLowerCase()==="xml"){if(f.ignoreDeclaration)return;m[f.declarationKey]={},Object.keys(t).length&&(m[f.declarationKey][f.attributesKey]=t),f.addParent&&(m[f.declarationKey][f.parentKey]=m)}else{if(f.ignoreInstruction)return;f.trim&&(e.body=e.body.trim());var o={};f.instructionHasAttributes&&Object.keys(t).length?(o[e.name]={},o[e.name][f.attributesKey]=t):o[e.name]=e.body,ve("instruction",o)}}function $t(e,t){var n;if(typeof e=="object"&&(t=e.attributes,e=e.name),t=nn(t),"elementNameFn"in f&&(e=f.elementNameFn(e,m)),f.compact){if(n={},!f.ignoreAttributes&&t&&Object.keys(t).length){n[f.attributesKey]={};var r;for(r in t)t.hasOwnProperty(r)&&(n[f.attributesKey][r]=t[r])}!(e in m)&&(ce(f.alwaysArray)?f.alwaysArray.indexOf(e)!==-1:f.alwaysArray)&&(m[e]=[]),m[e]&&!ce(m[e])&&(m[e]=[m[e]]),ce(m[e])?m[e].push(n):m[e]=n}else m[f.elementsKey]||(m[f.elementsKey]=[]),n={},n[f.typeKey]="element",n[f.nameKey]=e,!f.ignoreAttributes&&t&&Object.keys(t).length&&(n[f.attributesKey]=t),f.alwaysChildren&&(n[f.elementsKey]=[]),m[f.elementsKey].push(n);n[f.parentKey]=m,m=n}function zt(e){f.ignoreText||!e.trim()&&!f.captureSpacesBetweenElements||(f.trim&&(e=e.trim()),f.nativeType&&(e=tn(e)),f.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),ve("text",e))}function Jt(e){f.ignoreComment||(f.trim&&(e=e.trim()),ve("comment",e))}function Zt(e){var t=m[f.parentKey];f.addParent||delete m[f.parentKey],m=t}function Dr(e){f.ignoreCdata||(f.trim&&(e=e.trim()),ve("cdata",e))}function Lr(e){f.ignoreDoctype||(e=e.replace(/^ /,""),f.trim&&(e=e.trim()),ve("doctype",e))}function en(e){e.note=e}rn.exports=function(e,t){var n=Qe?Cr.parser(!0,{}):n=new Ir.Parser("UTF-8"),r={};if(m=r,f=Fr(t),Qe?(n.opt={strictEntities:!0},n.onopentag=$t,n.ontext=zt,n.oncomment=Jt,n.onclosetag=Zt,n.onerror=en,n.oncdata=Dr,n.ondoctype=Lr,n.onprocessinginstruction=Sr):(n.on("startElement",$t),n.on("text",zt),n.on("comment",Jt),n.on("endElement",Zt),n.on("error",en)),Qe)n.write(e).close();else if(!n.parse(e))throw new Error("XML parsing error: "+n.getError());if(r[f.elementsKey]){var o=r[f.elementsKey];delete r[f.elementsKey],r[f.elementsKey]=o,delete r.text}return r}});var sn=q((Zi,on)=>{var an=Le(),Or=$e();function kr(e){var t=an.copyOptions(e);return an.ensureSpacesExists(t),t}on.exports=function(e,t){var n,r,o,s;return n=kr(t),r=Or(e,n),s="compact"in n&&n.compact?"_parent":"parent","addParent"in n&&n.addParent?o=JSON.stringify(r,function(l,h){return l===s?"_":h},n.spaces):o=JSON.stringify(r,null,n.spaces),o.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}});var Je=q((ea,bn)=>{var b=Le(),Rr=De().isArray,L,O;function Tr(e){var t=b.copyOptions(e);return b.ensureFlagExists("ignoreDeclaration",t),b.ensureFlagExists("ignoreInstruction",t),b.ensureFlagExists("ignoreAttributes",t),b.ensureFlagExists("ignoreText",t),b.ensureFlagExists("ignoreComment",t),b.ensureFlagExists("ignoreCdata",t),b.ensureFlagExists("ignoreDoctype",t),b.ensureFlagExists("compact",t),b.ensureFlagExists("indentText",t),b.ensureFlagExists("indentCdata",t),b.ensureFlagExists("indentAttributes",t),b.ensureFlagExists("indentInstruction",t),b.ensureFlagExists("fullTagEmptyElement",t),b.ensureFlagExists("noQuotesForNativeAttributes",t),b.ensureSpacesExists(t),typeof t.spaces=="number"&&(t.spaces=Array(t.spaces+1).join(" ")),b.ensureKeyExists("declaration",t),b.ensureKeyExists("instruction",t),b.ensureKeyExists("attributes",t),b.ensureKeyExists("text",t),b.ensureKeyExists("comment",t),b.ensureKeyExists("cdata",t),b.ensureKeyExists("doctype",t),b.ensureKeyExists("type",t),b.ensureKeyExists("name",t),b.ensureKeyExists("elements",t),b.checkFnExists("doctype",t),b.checkFnExists("instruction",t),b.checkFnExists("cdata",t),b.checkFnExists("comment",t),b.checkFnExists("text",t),b.checkFnExists("instructionName",t),b.checkFnExists("elementName",t),b.checkFnExists("attributeName",t),b.checkFnExists("attributeValue",t),b.checkFnExists("attributes",t),b.checkFnExists("fullTagEmptyElement",t),t}function W(e,t,n){return(!n&&e.spaces?`
`:"")+Array(t+1).join(e.spaces)}function Oe(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,O,L));var r,o,s,l,h=[];for(r in e)e.hasOwnProperty(r)&&e[r]!==null&&e[r]!==void 0&&(l=t.noQuotesForNativeAttributes&&typeof e[r]!="string"?"":'"',o=""+e[r],o=o.replace(/"/g,"&quot;"),s="attributeNameFn"in t?t.attributeNameFn(r,o,O,L):r,h.push(t.spaces&&t.indentAttributes?W(t,n+1,!1):" "),h.push(s+"="+l+("attributeValueFn"in t?t.attributeValueFn(o,r,O,L):o)+l));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&h.push(W(t,n,!1)),h.join("")}function ln(e,t,n){return L=e,O="xml",t.ignoreDeclaration?"":"<?xml"+Oe(e[t.attributesKey],t,n)+"?>"}function un(e,t,n){if(t.ignoreInstruction)return"";var r;for(r in e)if(e.hasOwnProperty(r))break;var o="instructionNameFn"in t?t.instructionNameFn(r,e[r],O,L):r;if(typeof e[r]=="object")return L=e,O=o,"<?"+o+Oe(e[r][t.attributesKey],t,n)+"?>";var s=e[r]?e[r]:"";return"instructionFn"in t&&(s=t.instructionFn(s,r,O,L)),"<?"+o+(s?" "+s:"")+"?>"}function cn(e,t){return t.ignoreComment?"":"<!--"+("commentFn"in t?t.commentFn(e,O,L):e)+"-->"}function fn(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,O,L):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function dn(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,O,L):e)+">"}function ze(e,t){return t.ignoreText?"":(e=""+e,e=e.replace(/&amp;/g,"&"),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,O,L):e)}function Mr(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function jr(e,t,n){L=e,O=e.name;var r=[],o="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;r.push("<"+o),e[t.attributesKey]&&r.push(Oe(e[t.attributesKey],t,n));var s=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&e[t.attributesKey]["xml:space"]==="preserve";return s||("fullTagEmptyElementFn"in t?s=t.fullTagEmptyElementFn(e.name,e):s=t.fullTagEmptyElement),s?(r.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(r.push(hn(e[t.elementsKey],t,n+1)),L=e,O=e.name),r.push(t.spaces&&Mr(e,t)?`
`+Array(n+1).join(t.spaces):""),r.push("</"+o+">")):r.push("/>"),r.join("")}function hn(e,t,n,r){return e.reduce(function(o,s){var l=W(t,n,r&&!o);switch(s.type){case"element":return o+l+jr(s,t,n);case"comment":return o+l+cn(s[t.commentKey],t);case"doctype":return o+l+dn(s[t.doctypeKey],t);case"cdata":return o+(t.indentCdata?l:"")+fn(s[t.cdataKey],t);case"text":return o+(t.indentText?l:"")+ze(s[t.textKey],t);case"instruction":var h={};return h[s[t.nameKey]]=s[t.attributesKey]?s:s[t.instructionKey],o+(t.indentInstruction?l:"")+un(h,t,n)}},"")}function mn(e,t,n){var r;for(r in e)if(e.hasOwnProperty(r))switch(r){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:return!0;default:return!0}return!1}function Pr(e,t,n,r,o){L=e,O=t;var s="elementNameFn"in n?n.elementNameFn(t,e):t;if(typeof e>"u"||e===null||e==="")return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+s+"></"+s+">":"<"+s+"/>";var l=[];if(t){if(l.push("<"+s),typeof e!="object")return l.push(">"+ze(e,n)+"</"+s+">"),l.join("");e[n.attributesKey]&&l.push(Oe(e[n.attributesKey],n,r));var h=mn(e,n,!0)||e[n.attributesKey]&&e[n.attributesKey]["xml:space"]==="preserve";if(h||("fullTagEmptyElementFn"in n?h=n.fullTagEmptyElementFn(t,e):h=n.fullTagEmptyElement),h)l.push(">");else return l.push("/>"),l.join("")}return l.push(pn(e,n,r+1,!1)),L=e,O=t,t&&l.push((o?W(n,r,!1):"")+"</"+s+">"),l.join("")}function pn(e,t,n,r){var o,s,l,h=[];for(s in e)if(e.hasOwnProperty(s))for(l=Rr(e[s])?e[s]:[e[s]],o=0;o<l.length;++o){switch(s){case t.declarationKey:h.push(ln(l[o],t,n));break;case t.instructionKey:h.push((t.indentInstruction?W(t,n,r):"")+un(l[o],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:h.push((t.indentText?W(t,n,r):"")+ze(l[o],t));break;case t.cdataKey:h.push((t.indentCdata?W(t,n,r):"")+fn(l[o],t));break;case t.doctypeKey:h.push(W(t,n,r)+dn(l[o],t));break;case t.commentKey:h.push(W(t,n,r)+cn(l[o],t));break;default:h.push(W(t,n,r)+Pr(l[o],s,t,n,mn(l[o],t)))}r=r&&!h.length}return h.join("")}bn.exports=function(e,t){t=Tr(t);var n=[];return L=e,O="_root_",t.compact?n.push(pn(e,t,0,!0)):(e[t.declarationKey]&&n.push(ln(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(hn(e[t.elementsKey],t,0,!n.length))),n.join("")}});var vn=q((ta,yn)=>{var Br=Je();yn.exports=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if(typeof e=="string")try{n=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else n=e;return Br(n,t)}});var Ze=q((na,gn)=>{var Kr=$e(),Gr=sn(),Ur=Je(),qr=vn();gn.exports={xml2js:Kr,xml2json:Gr,js2xml:Ur,json2xml:qr}});var An=ht(Ze());var Wr=ht(Ze());var fe;(function(e){e.abbrev="abbrev",e.abstract="abstract",e.accessDate="access-date",e.ack="ack",e.addrLine="addr-line",e.address="address",e.aff="aff",e.affAlternatives="aff-alternatives",e["ali:free_to_read"]="ali:free_to_read",e["ali:license_ref"]="ali:license_ref",e.altText="alt-text",e.altTitle="alt-title",e.alternatives="alternatives",e.annotation="annotation",e.anonymous="anonymous",e.answer="answer",e.answerSet="answer-set",e.app="app",e.appGroup="app-group",e.array="array",e.article="article",e.articleMeta="article-meta",e.articleTitle="article-title",e.articleVersion="article-version",e.attrib="attrib",e.authorComment="author-comment",e.awardDesc="award-desc",e.awardGroup="award-group",e.awardId="award-id",e.awardName="award-name",e.back="back",e.bio="bio",e.body="body",e.bold="bold",e.boxedText="boxed-text",e.break="break",e.caption="caption",e.chapterTitle="chapter-title",e.chemStruct="chem-struct",e.chemStructWrap="chem-struct-wrap",e.citationAlternatives="citation-alternatives",e.city="city",e.code="code",e.col="col",e.colgroup="colgroup",e.collab="collab",e.collabAlternatives="collab-alternatives",e.comment="comment",e.compoundKwd="compound-kwd",e.compoundKwdPart="compound-kwd-part",e.compoundSubject="compound-subject",e.compoundSubjectPart="compound-subject-part",e.confAcronym="conf-acronym",e.confDate="conf-date",e.confLoc="conf-loc",e.confName="conf-name",e.confNum="conf-num",e.confSponsor="conf-sponsor",e.confTheme="conf-theme",e.conference="conference",e.contrib="contrib",e.contribGroup="contrib-group",e.contribId="contrib-id",e.contributedResourceGroup="contributed-resource-group",e.copyrightHolder="copyright-holder",e.copyrightStatement="copyright-statement",e.copyrightYear="copyright-year",e.country="country",e.customMeta="custom-meta",e.customMetaGroup="custom-meta-group",e.dataTitle="data-title",e.date="date",e.dateInCitation="date-in-citation",e.day="day",e.def="def",e.defHead="def-head",e.defItem="def-item",e.defList="def-list",e.degrees="degrees",e.dispFormula="disp-formula",e.dispFormulaGroup="disp-formula-group",e.dispQuote="disp-quote",e.edition="edition",e.elementCitation="element-citation",e.elocationId="elocation-id",e.email="email",e.era="era",e.etal="etal",e.explanation="explanation",e.extLink="ext-link",e.extendedBy="extended-by",e.fax="fax",e.fig="fig",e.fixedCase="fixed-case",e.fn="fn",e.fnGroup="fn-group",e.fpage="fpage",e.front="front",e.fundingGroup="funding-group",e.fundingSource="funding-source",e.fundingStatement="funding-statement",e.givenNames="given-names",e.glossary="glossary",e.glyphData="glyph-data",e.glyphRef="glyph-ref",e.gov="gov",e.graphic="graphic",e.hr="hr",e.indexTerm="index-term",e.indexTermRangeEnd="index-term-range-end",e.inlineFormula="inline-formula",e.inlineGraphic="inline-graphic",e.inlineMedia="inline-media",e.inlineSupplementaryMaterial="inline-supplementary-material",e.institution="institution",e.institutionId="institution-id",e.institutionWrap="institution-wrap",e.isbn="isbn",e.issn="issn",e["issn-l"]="issn-l",e.issue="issue",e.issueId="issue-id",e.issuePart="issue-part",e.issueTitle="issue-title",e.italic="italic",e.journalId="journal-id",e.kwd="kwd",e.kwdGroup="kwd-group",e.label="label",e.license="license",e["license-p"]="license-p",e.list="list",e.listItem="list-item",e.longDesc="long-desc",e.lpage="lpage",e.media="media",e.metaName="meta-name",e.metaValue="meta-value",e.mixedCitation="mixed-citation",e["mml:math"]="mml:math",e.monospace="monospace",e.month="month",e.name="name",e.nameAlternatives="name-alternatives",e.namedContent="named-content",e.nestedKwd="nested-kwd",e.nlmCitation="nlm-citation",e.objectId="object-id",e.onBehalfOf="on-behalf-of",e.openAccess="open-access",e.option="option",e.overline="overline",e.p="p",e.pageCount="page-count",e.pageRange="page-range",e.partTitle="part-title",e.patent="patent",e.permissions="permissions",e.personGroup="person-group",e.phone="phone",e.postalCode="postal-code",e.prefix="prefix",e.preformat="preformat",e.price="price",e.principalAwardRecipient="principal-award-recipient",e.principalInvestigator="principal-investigator",e.privateChar="private-char",e.processingMeta="processing-meta",e.product="product",e.pubId="pub-id",e.publisherLoc="publisher-loc",e.publisherName="publisher-name",e.question="question",e.questionPreamble="question-preamble",e.questionWrap="question-wrap",e.questionWrapGroup="question-wrap-group",e.rb="rb",e.ref="ref",e.refList="ref-list",e.relatedArticle="related-article",e.relatedObject="related-object",e.resourceGroup="resource-group",e.resourceId="resource-id",e.resourceName="resource-name",e.resourceWrap="resource-wrap",e.restrictedBy="restricted-by",e.role="role",e.roman="roman",e.rt="rt",e.ruby="ruby",e.sansSerif="sans-serif",e.sc="sc",e.season="season",e.sec="sec",e.secMeta="sec-meta",e.see="see",e.seeAlso="see-also",e.selfUri="self-uri",e.series="series",e.size="size",e.source="source",e.speaker="speaker",e.speech="speech",e.state="state",e.statement="statement",e.std="std",e.stdOrganization="std-organization",e.strike="strike",e.stringDate="string-date",e.stringName="string-name",e.styledContent="styled-content",e.sub="sub",e.subjGroup="subj-group",e.subject="subject",e.subtitle="subtitle",e.suffix="suffix",e.sup="sup",e.supplement="supplement",e.supplementaryMaterial="supplementary-material",e.supportDescription="support-description",e.supportGroup="support-group",e.supportSource="support-source",e.surname="surname",e.table="table",e.tableWrap="table-wrap",e.tableWrapFoot="table-wrap-foot",e.target="target",e.tbody="tbody",e.td="td",e.term="term",e.termHead="term-head",e.textualForm="textual-form",e.tfoot="tfoot",e.th="th",e.thead="thead",e.timeStamp="time-stamp",e.title="title",e.titleGroup="title-group",e.tr="tr",e.transSource="trans-source",e.transTitle="trans-title",e.underline="underline",e.uri="uri",e.verseGroup="verse-group",e.verseLine="verse-line",e.version="version",e.volume="volume",e.volumeId="volume-id",e.volumeSeries="volume-series",e.xref="xref",e.year="year",e.subArticle="sub-article",e.articleId="article-id",e.pubDate="pub-date",e.articleCategories="article-categories",e.journalTitle="journal-title"})(fe||(fe={}));var Q;(function(e){e.aff="aff",e.app="app",e.authorNote="author-note",e.award="award",e.bibr="bibr",e.bio="bio",e.boxedText="boxed-text",e.chem="chem",e.collab="collab",e.contrib="contrib",e.corresp="corresp",e.custom="custom",e.dispFormula="disp-formula",e.fig="fig",e.fn="fn",e.kwd="kwd",e.list="list",e.plate="plate",e.scheme="scheme",e.sec="sec",e.statement="statement",e.supplementaryMaterial="supplementary-material",e.table="table",e.tableFn="table-fn"})(Q||(Q={}));function Vr(e,t){var n,r,o,s;let l=!t.type||t.type==="article-journal"?"journal":t.type,h=[],y=(n=t.author)===null||n===void 0?void 0:n.map(x=>{if(!x.given&&!x.family)return;let k=[];return x.family&&k.push({type:"element",name:"surname",elements:[{type:"text",text:x.family}]}),x.given&&k.push({type:"element",name:"given-names",elements:[{type:"text",text:x.given}]}),{type:"element",name:"name",elements:k}}).filter(x=>!!x);y&&y.length&&h.push({type:"element",name:"person-group",attributes:{"person-group-type":"author"},elements:y}),t.title&&h.push({type:"element",name:"article-title",elements:[{type:"text",text:t.title}]}),t["container-title"]&&h.push({type:"element",name:"source",elements:[{type:"text",text:t["container-title"]}]});let v=(s=(o=(r=t.issued)===null||r===void 0?void 0:r["date-parts"])===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s[0];if(v&&h.push({type:"element",name:"year",attributes:{"iso-8601-date":String(v)},elements:[{type:"text",text:String(v)}]}),t.DOI&&h.push({type:"element",name:"pub-id",attributes:{"pub-id-type":"doi"},elements:[{type:"text",text:t.DOI}]}),t.volume&&h.push({type:"element",name:"volume",elements:[{type:"text",text:t.volume}]}),t.issue&&h.push({type:"element",name:"issue",elements:[{type:"text",text:t.issue}]}),t.page){let[x,k]=t.page.split("-");x&&h.push({type:"element",name:"fpage",elements:[{type:"text",text:x}]}),k&&h.push({type:"element",name:"lpage",elements:[{type:"text",text:k}]})}return t.ISSN&&h.push({type:"element",name:"issn",elements:[{type:"text",text:t.ISSN}]}),{type:"element",name:"ref",attributes:{id:e},elements:[{type:"element",name:"element-citation",attributes:{"publication-type":l},elements:h}]}}function Hr(e){return!e||!Object.keys(e).length?[]:[{type:"element",name:"ref-list",elements:Object.keys(e).sort().map(n=>Vr(n,e[n].cite))}]}function Xr(e){return e?.length?[{type:"element",name:"fn-group",elements:e}]:[]}function En(e,t){let n=[...Hr(e),...Xr(t)];return n.length?{type:"element",name:"back",elements:n}:null}function Yr(){return[]}function Qr(){let e=[];return e.length?[{type:"element",name:"journal-title-group",elements:e}]:[]}function $r(){return[]}function zr(){return[]}function Jr(){return[]}function Zr(){let e=[...Yr(),...Qr(),...$r(),...zr(),...Jr()];return e.length?[{type:"element",name:"journal-meta",elements:e}]:[]}function ei(e){let t=e?.title,n=e?.subtitle;if(!t&&!n)return[];let r=t?[{type:"element",name:"article-title",elements:[{type:"text",text:t}]}]:[],o=n?[{type:"element",name:"subtitle",elements:[{type:"text",text:n}]}]:[];return[{type:"element",name:"title-group",elements:[...r,...o]}]}function ti(e){var t;let n=(t=e.authors)===null||t===void 0?void 0:t.map(r=>{let o={},s=[];return o["contrib-type"]="author",r.orcid&&s.push({type:"element",name:"contrib-id",attributes:{"contrib-id-type":"orcid"},elements:[{type:"text",text:r.orcid}]}),r.corresponding&&(o.corresp="yes"),r.name&&s.push({type:"element",name:"string-name",elements:[{type:"text",text:r.name}]}),r.roles&&s.push(...r.roles.map(l=>({type:"element",name:"role",attributes:{vocab:"CRediT","vocab-identifier":"http://credit.niso.org/","vocab-term":`${l}`},elements:[{type:"text",text:l}]}))),r.affiliations&&s.push(...r.affiliations.map(l=>({type:"element",name:"aff",elements:[{type:"element",name:"institution",elements:[{type:"text",text:l}]}]}))),r.email&&s.push({type:"element",name:"email",elements:[{type:"text",text:r.email}]}),r.website&&s.push({type:"element",name:"ext-link",attributes:{"ext-link-type":"uri","xlink:href":r.website},elements:[{type:"text",text:r.website}]}),{type:"element",name:"contrib",attributes:o,elements:s}});return n??[]}function ni(e){var t,n,r,o,s;let l=(r=(n=(t=e.license)===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.url)!==null&&r!==void 0?r:(s=(o=e.license)===null||o===void 0?void 0:o.code)===null||s===void 0?void 0:s.url,h=e.open_access?[{type:"element",name:"ali:free_to_read"}]:[];return l?[{type:"element",name:"permissions",elements:[...h,{type:"element",name:"license",elements:[{type:"element",name:"ali:license_ref",elements:[{type:"text",text:l}]}]}]}]:[]}function ri(e){var t;let n=(t=e.biblio)===null||t===void 0?void 0:t.volume;return n?[{type:"element",name:"volume",elements:[{type:"text",text:`${n}`}]}]:[]}function ii(e){var t;let n=(t=e.biblio)===null||t===void 0?void 0:t.issue;return n?[{type:"element",name:"issue",elements:[{type:"text",text:`${n}`}]}]:[]}function ai(e){var t;let{first_page:n,last_page:r}=(t=e.biblio)!==null&&t!==void 0?t:{},o=[];return n&&o.push({type:"element",name:"fpage",elements:[{type:"text",text:`${n}`}]}),r&&o.push({type:"element",name:"lpage",elements:[{type:"text",text:`${r}`}]}),o}function oi(e){let t=[...ei(e),...ti(e),...ri(e),...ii(e),...ai(e),...ni(e)];return t.length?[{type:"element",name:"article-meta",elements:t}]:[]}function wn(e){if(!e)return null;let t=[...Zr(),...oi(e)];return t.length?{type:"element",name:"front",elements:t}:null}we();function et(e){z("definitionList",e).forEach(n=>{let r=[],o;function s(){o&&o.children.length>0&&r.push(o),o={type:"definitionItem",children:[]}}n.children.forEach(l=>{(l.type==="definitionTerm"||!o)&&s(),o?.children.push(l)}),s(),n.children=r})}we();function si(e){let t=pe("caption",e),n=pe("captionNumber",e);t&&gt(t,"captionNumber"),n&&e.children.splice(0,0,n)}function tt(e){z("container",e).forEach(n=>{if(si(n),n.kind==="quote"){let r=pe("caption > paragraph",n),o=pe("blockquote",n);if(o&&r){let s=n;s.type="blockquote",s.children=o.children,r.type="attrib",s.children.push(r)}}})}we();function nt(e){z("table",e).forEach(n=>{let r={type:"tableHead",children:[]},o={type:"tableBody",children:[]};n.children.forEach(s=>{s.children.reduce((h,y)=>h&&!!y.header,!0)&&o.children.length===0?r.children.push(s):o.children.push(s)}),n.children=r.children.length>0?[r,o]:[o]})}var li=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function rt(e){yt(e,"block");let t=[],n;function r(s){n?n.children.push(s):t.push(s)}function o(s){let{enumerator:l,enumerated:h}=s,y=li(s,["enumerator","enumerated"]);if(n&&n.depth<s.depth){let v=Object.assign(Object.assign({},y),{type:"section",children:[]});return r(v),n=v,{enumerator:l,enumerated:h}}return n=Object.assign(Object.assign({},y),{type:"section",children:[]}),t.push(n),{enumerator:l,enumerated:h}}e.children.forEach(s=>{if(s.type==="heading"){let{enumerator:l,enumerated:h}=o(s);r({type:"heading",enumerator:l,enumerated:h,children:s.children})}else r(s)}),e.children=t}we();function xn(e){z("citeGroup",e).forEach(n=>{if(!n.children.length||n.children.filter(l=>l.type!=="cite").length)return;let{kind:r}=n;n.children.forEach(l=>{l.kind=r});let o=[];r==="parenthetical"&&o.push({type:"text",value:"("}),o.push(n.children[0]);let s=r==="parenthetical"?";":",";n.children.slice(1).forEach(l=>{o.push({type:"text",value:`${s} `},l)}),r==="parenthetical"&&o.push({type:"text",value:")"}),n.children=o})}function _n(e){et(e),tt(e),nt(e),rt(e),xn(e)}function ui(e){switch(e){case"heading":return Q.sec;case"figure":return Q.fig;case"equation":return Q.dispFormula;case"table":return Q.table;default:return Q.custom}}function Nn(e,t,n=r=>r){let{enumerated:r,enumerator:o}=e;r!==!1&&o&&(t.openNode("label"),t.text(n(o)),t.closeNode())}var Cn={text(e,t){t.text(e.value)},paragraph(e,t){t.renderInline(e,"p")},section(e,t){t.renderInline(e,"sec")},heading(e,t){Nn(e,t),t.renderInline(e,"title")},block(e,t){t.renderChildren(e)},blockquote(e,t){t.renderInline(e,"disp-quote")},definitionList(e,t){t.renderInline(e,"def-list")},definitionItem(e,t){t.renderInline(e,"def-item")},definitionTerm(e,t){t.renderInline(e,"term")},definitionDescription(e,t){t.renderInline(e,"def")},code(e,t){let{lang:n}=e;t.renderInline(e,"code",{language:n})},list(e,t){t.renderInline(e,"list",{"list-type":e.ordered?"ordered":"bullet"})},listItem(e,t){t.renderInline(e,"list-item")},thematicBreak(){},inlineMath(e,t){t.openNode("inline-formula"),t.openNode("tex-math"),t.addLeaf("cdata",{cdata:e.value}),t.closeNode(),t.closeNode()},math(e,t){t.openNode("disp-formula",{id:e.identifier}),Nn(e,t,n=>`(${n})`),t.openNode("tex-math"),t.addLeaf("cdata",{cdata:e.value}),t.closeNode(),t.closeNode()},mystRole(e,t){t.renderChildren(e)},mystDirective(e,t){t.renderChildren(e)},mystComment(){},comment(){},strong(e,t){t.renderInline(e,"bold")},emphasis(e,t){t.renderInline(e,"italic")},underline(e,t){t.renderInline(e,"underline")},inlineCode(e,t){t.renderInline(e,"monospace")},subscript(e,t){t.renderInline(e,"sub")},superscript(e,t){t.renderInline(e,"sup")},delete(e,t){t.renderInline(e,"strike")},smallcaps(e,t){t.renderInline(e,"sc")},break(e,t,n){if(n.type==="paragraph"){t.warn("There are no breaks allowed in paragraphs.",e,"break",{url:"https://jats.nlm.nih.gov/archiving/tag-library/1.3/element/break.html"});return}t.addLeaf("break")},link(e,t){t.renderInline(e,"ext-link",{"ext-link-type":"uri","xlink:href":e.url})},admonition(e,t){t.renderInline(e,"boxed-text",{"content-type":e.kind})},admonitionTitle(e,t){t.openNode("caption"),t.renderInline(e,"title"),t.closeNode()},attrib(e,t){t.renderInline(e,"attrib")},table(e,t){t.renderInline(e,"table")},tableHead(e,t){t.renderInline(e,"thead")},tableBody(e,t){t.renderInline(e,"tbody")},tableFooter(e,t){t.renderInline(e,"tfoot")},tableRow(e,t){t.renderInline(e,"tr")},tableCell(e,t){let{align:n,colspan:r,rowspan:o}=e;t.renderInline(e,e.header?"th":"td",{align:n,colspan:r?String(r):void 0,rowspan:o?String(o):void 0})},image(e,t){var n;!((n=e.url)===null||n===void 0)&&n.startsWith("http")&&t.warn(`Image URL is remote (${e.url})`,e,"image"),t.data.isInContainer&&e.alt&&(t.openNode("alt-text"),t.text(e.alt),t.closeNode()),t.addLeaf("graphic",{"xlink:href":e.url})},container(e,t){switch(t.data.isInContainer=!0,e.kind){case"figure":{t.renderInline(e,"fig");break}case"table":{t.renderInline(e,"table-wrap");break}case"quote":{t.renderChildren(e);break}case"code":{t.renderInline(e,"boxed-text",{"content-type":e.kind});break}default:t.error(`Unhandled container kind of ${e.kind}`,e,"container"),t.renderChildren(e)}delete t.data.isInContainer},caption(e,t){t.renderInline(e,"caption")},captionNumber(e,t){t.renderInline(e,"label")},crossReference(e,t){let{identifier:n,kind:r}=e,o={"ref-type":ui(r),rid:n};o["ref-type"]===Q.custom&&r&&(o["custom-type"]=r),t.renderInline(e,"xref",o)},citeGroup(e,t){t.renderChildren(e)},cite(e,t){let{label:n}=e,r={"ref-type":"bibr",rid:n};t.renderInline(e,"xref",r)},footnoteReference(e,t){let{identifier:n}=e,r={"ref-type":"fn",rid:n};t.addLeaf("xref",r)},footnoteDefinition(e,t){t.openNode("fn",{id:e.identifier}),t.openNode("label"),t.text(e.label),t.closeNode(),t.renderChildren(e);let n=t.stack.pop();n&&t.footnotes.push(n)}};function ci(e){return{type:"text",text:e}}var it=class{constructor(t,n,r){var o;for(this.file=t,this.options=r??{},this.data={},this.stack=[{type:"element",elements:[]}],this.footnotes=[],this.handlers=(o=r?.handlers)!==null&&o!==void 0?o:Cn,this.renderChildren(n);this.stack.length>1;)this.closeNode()}top(){return this.stack[this.stack.length-1]}warn(t,n,r,o){xe(this.file,t,Object.assign(Object.assign({},o),{node:n,source:r?`myst-to-jats:${r}`:"myst-to-jats"}))}error(t,n,r,o){xe(this.file,t,Object.assign(Object.assign({},o),{node:n,source:r?`myst-to-jats:${r}`:"myst-to-jats"}))}pushNode(t){var n;let r=this.top();return this.stack.length&&t&&"elements"in r&&((n=r.elements)===null||n===void 0||n.push(t)),t}text(t){var n,r;let o=this.top(),s=t;if(!s||!this.stack.length||!("elements"in o))return;let l=(n=o.elements)===null||n===void 0?void 0:n[o.elements.length-1];if(l?.type==="text")return l.text+=`${s}`,l;let h=ci(s);return(r=o.elements)===null||r===void 0||r.push(h),h}renderChildren(t){var n;(n=t.children)===null||n===void 0||n.forEach(r=>{let o=this.handlers[r.type];o?o(r,this,t):xe(this.file,`Unhandled JATS conversion for node of "${r.type}"`,{node:r,source:"myst-to-jats"})})}renderInline(t,n,r){this.openNode(n,Object.assign({id:n!=="xref"&&t.identifier?t.identifier:void 0},r)),"children"in t?this.renderChildren(t):"value"in t&&t.value&&this.text(t.value),this.closeNode()}addLeaf(t,n){this.openNode(t,n,!0),this.closeNode()}openNode(t,n,r=!1){let o=t==="cdata"?{type:"cdata",cdata:n?.cdata}:{type:"element",name:t,attributes:n};r||(o.elements=[]),this.stack.push(o)}closeNode(){let t=this.stack.pop();return this.pushNode(t)}article(t,n){let r={"xmlns:mml":"http://www.w3.org/1998/Math/MathML","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:ali":"http://www.niso.org/schemas/ali/1.0/","dtd-version":"1.3","xml:lang":"en"};t&&(r["article-type"]=t),n&&(r["specific-use"]=n);let o=wn(this.options.frontmatter),s=En(this.options.citations,this.footnotes),l=[];return o&&l.push(o),l.push({type:"element",name:"body",elements:this.body()}),s&&l.push(s),{type:"element",name:fe.article,attributes:r,elements:l}}body(){var t;return(t=this.stack[0].elements)!==null&&t!==void 0?t:[]}back(){return{}}},fi=function(e){return this.Compiler=(t,n)=>{let r=vt(t);_n(r);let o=new it(n,r,e??{handlers:Cn}),s=e?.fullArticle?[o.article()]:o.body(),h={value:(0,An.js2xml)({type:"element",elements:s},{compact:!1,spaces:e?.spaces})};return n.result=h,n},t=>t},io=fi;export{io as default};
